(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4675],{70523:function(e,t,s){"use strict";var i=s(3827),a=s(64090),n=s(6388),_=s.n(n),o=s(75504);let l=(0,a.forwardRef)((e,t)=>{let{disabled:s=!1,value:a=0,style:n={},onChange:l,className:c="",min:r=0,placeholder:d="0.00",autoFocus:k=!1,id:u}=e,p=e=>{let t=e.target.value;""===t?l(""):l(isNaN(Number(t))?t:Number(t))};return(0,i.jsx)("div",{className:_().div_input,children:(0,i.jsx)("input",{ref:t,id:u,style:n,type:"number",onWheel:e=>e.target.blur(),className:(0,o.Z)(_().input,s&&_().input_disabled,c),autoFocus:k,disabled:s,placeholder:d,min:r,value:a,onChange:p,onKeyDown:e=>{["e","E","+","-"].includes(e.key)&&e.preventDefault()},onCompositionEnd:e=>{if(/[^0-9.]/.test(e.data)){let t=e.data.replace(/[^0-9.]/g,"");e.target.value=a+t}p(e)}})})});t.Z=l},3191:function(e,t,s){"use strict";s.d(t,{Z:function(){return o}});var i=s(3827);s(64090);var a=s(87891),n=s.n(a),_=s(47907);function o(e){let t=(0,_.useRouter)();return(0,i.jsxs)("div",{className:n().backBtn,style:e.style,onClick:()=>{e.clickBack?e.clickBack():t.back()},children:[(0,i.jsx)("img",{src:"/assets/common/back2.svg",className:n().backImg}),(0,i.jsx)("div",{children:e.title})]})}},4675:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return I}});var i=s(3827),a=s(70523),n=s(3191),_=s(4089),o=s(84709),l=s(16432),c=s(20123),r=s(34225),d=s(53916),k=s(61413),u=s(72027),p=s(44193),v=s(36816),m=s(77318),x=s(51590),g=s(6962),h=s(48395),j=s(44129),T=s(22840),f=s(75504),N=s(30982),L=s(8792),P=s(47907),y=s(64090),b=s(62578),S=s.n(b);let D="/assets/portfolio/lp.svg";function I(e){let t=(0,N.useTranslations)("common"),s=(0,P.useRouter)(),{windowType:b,btcAddr:I,ethAddr:C,guideIndex:B,guideAllNum:A,setStepGuide:w,notificationRef:E}=(0,r.Nk)(),{provider:M,btcPrice:Z}=(0,d.VV)(),[z,R]=(0,y.useState)(!1),[F,V]=(0,y.useState)(!1),[H,O]=(0,y.useState)(0),[X,U]=(0,y.useState)(!1),[Y,Q]=(0,y.useState)(u.bM),[J,W]=(0,y.useState)(u.bM),[K,q]=(0,y.useState)("1"==e.stakeHistory),[G,$]=(0,y.useState)({skip:0,current:1,pageSize:10,total:0}),[ee,et]=(0,y.useState)([]),[es,ei]=(0,y.useState)(!1),ea=(0,y.useRef)(u.bM),en=(0,y.useRef)(u.bM),e_=(0,y.useRef)(null);(0,y.useEffect)(()=>{let e=localStorage.getItem("guideStep");C&&I&&b===x.n.MobileApp&&4===Number(e)&&eg()},[B]),(0,y.useEffect)(()=>{C?eo():(W(u.bM),Q(u.bM))},[Z,z,C]),(0,y.useEffect)(()=>{K&&C&&localStorage.getItem("Authorization")?ep():(et([]),$({skip:0,current:1,pageSize:G.pageSize,total:0}))},[K,G.skip,C]);let eo=async()=>{Z.isZero()||(z?W(await (0,v.Vn)(M.current,C)):Q(await (0,v.xP)(M.current,C)),en.current=await (0,v.BB)(M.current,Z),ea.current=await (0,v.GZ)(M.current))},el=(0,y.useMemo)(()=>!Z.isZero()&&ea.current.gt(0)&&en.current&&H?(0,T.Z)(H).div(ea.current).times(en.current):u.bM,[Z,H]),ec=e=>{O(e||0)},er=(e,t)=>{E&&E.openNotification(e,t)},ed=async()=>{let s;if(V(!0),E&&E.notificationDestroy(),s=z?await (0,v.jd)(M.current,H,C,void 0):await (0,v.jd)(M.current,H,C,"stake")){if(s===p.HX.ERROR_FEE){er(t("MintYU_49"),t("MintYU_50")),V(!1);return}if(s===p.HX.ERROR_AUTH_LP){V(!1),er(t("lan_12"),t("lan_13"));return}}else{V(!1);return}eo(),e.getTheLatestLPToken(),V(!1),U(!0)},ek=()=>{R(!z),O(0)},eu=(e,s)=>(0,i.jsx)("div",{className:S().transAcctivity,children:t.rich("Staked"===e?"portfolio_108":"portfolio_109",{val:()=>(0,i.jsxs)("div",{className:S().transAcctivity_div,children:[(0,i.jsx)("span",{children:(0,j.Eg)((0,m.J8)((0,T.Z)(s)))}),(0,i.jsx)("img",{src:D,alt:"lp"})]})})}),ep=async()=>{ei(!0);let e=await (0,g.Tr)(G.skip,G.pageSize);if((null==e?void 0:e.code)==0){var t,s;et(null==e?void 0:e.data.data),$({skip:G.skip,current:G.current,pageSize:G.pageSize,total:(null===(t=e.data)||void 0===t?void 0:t.total)?null===(s=e.data)||void 0===s?void 0:s.total:0})}ei(!1)},ev=e=>{$({skip:(e-1)*G.pageSize,current:e,pageSize:G.pageSize,total:G.total})},em=()=>{q(!K),O(0),$({skip:0,current:G.current,pageSize:G.pageSize,total:G.total})},ex=(0,y.useMemo)(()=>z?J.toString():Y.toString(),[z,J,Y]),eg=()=>{e_.current&&e_.current.scrollIntoView({behavior:"smooth",block:"end"})};return(0,i.jsxs)("div",{className:S().stake_div,children:[K?(0,i.jsxs)(i.Fragment,{children:[" ",(0,i.jsxs)("div",{className:S().stake_history,children:[(0,i.jsxs)("div",{className:S().stake_history_top,children:[(0,i.jsx)(n.Z,{style:{opacity:.5},title:t("common_22"),clickBack:em}),(0,i.jsx)("div",{children:t("portfolio_77")})]}),(0,i.jsxs)("div",{className:S().listContent,children:[(0,i.jsxs)("div",{className:S().contentTop,children:[(0,i.jsx)("div",{className:S().contentTop_div_1,children:t("common_29")}),(0,i.jsx)("div",{className:S().contentTop_div_2,children:t("portfolio_23")}),(0,i.jsx)("div",{className:S().contentTop_div_3,children:t("common_40")})]}),(0,i.jsx)("div",{className:S().contentAll,children:0==ee.length||es?(0,i.jsx)(l.Z,{loading:es}):ee.map((e,s)=>(0,i.jsx)("div",{className:S().vaultList,children:(0,i.jsxs)("div",{className:S().contentDiv,children:[(0,i.jsxs)("div",{className:S().contentDiv_div_1,children:[(0,i.jsx)("div",{className:S().textAlign_XS,children:t("common_29")}),(0,i.jsx)("div",{children:(0,h.mr)(e.timeCreate)})]}),(0,i.jsxs)("div",{className:S().contentDiv_div_2,children:[(0,i.jsx)("div",{className:S().textAlign_XS,children:t("portfolio_23")}),(0,i.jsx)("div",{children:eu(e.type,e.amount)})]}),(0,i.jsxs)("div",{className:S().contentDiv_div_3,children:[(0,i.jsx)("div",{className:S().textAlign_XS,children:t("common_40")}),(0,i.jsx)("a",{href:(0,h.nA)(e.tx),target:"_blank",className:S().stake_txid_div,children:(0,j.Tg)(e.tx)})]})]})},s))})]})]}),(0,i.jsx)(o.Z,{type:"pagination",pageChange:e=>ev(e),total:G.total,current:G.current,pageSize:G.pageSize})]}):(0,i.jsxs)("div",{className:S().stake_div_all,style:{zIndex:4===B?5:0},children:[(0,i.jsxs)("div",{className:S().stake_div_left,children:[(0,i.jsxs)("div",{className:S().stake_div_left_tit,children:[(0,i.jsx)("img",{src:D,alt:"lp"}),(0,i.jsx)("div",{children:t("portfolio_105")})]}),(0,i.jsxs)("div",{children:[t("portfolio_101")," ",(0,i.jsx)("a",{href:k.ZP.SWAP_LP_TOKEN_HREF,target:"_blank",children:t("portfolio_102")})]})]}),(0,i.jsxs)("div",{className:S().DepositContent_all,children:[4===B&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:S().guide_fixed}),(0,i.jsxs)("div",{className:S().guide_4,children:[(0,i.jsx)("img",{src:b===x.n.MobileApp?"/assets/home/app_arrow_2.svg":"/assets/home/img_step4_arrow.svg",alt:"arrow",className:S().guide_arrow}),(0,i.jsxs)("div",{className:S().guide_content,children:[(0,i.jsxs)("div",{className:S().guide_step,children:[t("common_44")," ",B," / ",A]}),(0,i.jsx)("div",{className:S().guide_text,children:t("common_49")}),(0,i.jsx)("div",{className:S().guide_next,onClick:()=>{localStorage.setItem("guideStep","5"),w(5),s.replace("/stability-pool")},children:t("common_46")}),(0,i.jsx)("img",{src:b===x.n.MobileApp?"/assets/home/img_step2_yeti.svg":"/assets/home/img_step4_yeti.svg",alt:"yeti",className:S().guide_yeti})]})]})]}),(0,i.jsxs)("div",{className:S().DepositContent,style:{zIndex:4===B?5:0},ref:e_,children:[(0,i.jsxs)("div",{className:S().DepositSelect,children:[(0,i.jsx)("div",{onClick:ek,className:z?"":S().selected,children:t("portfolio_68")}),(0,i.jsx)("div",{onClick:ek,className:z?S().selected:"",children:t("common_21")})]}),(0,i.jsxs)("div",{className:S().divInput,children:[(0,i.jsxs)("div",{className:S().divInput_left,children:[(0,i.jsxs)("div",{className:S().listDivTop_img,children:[(0,i.jsx)("img",{src:"/assets/BorrowYU/yu.svg",alt:"yu"}),(0,i.jsx)("div",{className:S().listDivTop_imgUp,children:(0,i.jsx)("img",{src:"/assets/BorrowYU/ybtc.svg",alt:"ybtc"})})]}),(0,i.jsxs)("div",{className:S().center_input,children:[(0,i.jsx)(a.Z,{min:0,className:S().DepositInput,disabled:!!(F||!C),value:H,onChange:ec}),(0,i.jsxs)("div",{children:["â‰ˆ ",(0,j.Eg)(el)," YU"]})]})]}),(0,i.jsx)("div",{className:S().stake_max,onClick:()=>ec(ex),children:"MAX"})]}),(0,i.jsxs)("div",{className:S().total_staked,children:[(0,i.jsx)("div",{children:z?t("portfolio_72"):t("portfolio_97")}),(0,i.jsxs)("div",{children:[(0,j.Eg)(z?J:Y)," ",(0,i.jsx)("span",{children:t("portfolio_98")})]})]}),(0,i.jsx)(_.Z,{className:(0,f.Z)(S().Bridge),title:z?t("common_21"):t("portfolio_68"),block:!0,mask:!0,loading:F,disabled:!C||H<=0||H>Number(ex),onClick:ed}),(0,i.jsx)("div",{className:S().stake_tisp,children:t.rich(z?"portfolio_100":"portfolio_99",{type:()=>(0,i.jsx)("span",{children:"0.04"})})})]})]}),(0,i.jsx)("div",{className:S().stake_tisp2,onClick:em,children:t("portfolio_77")})]}),(0,i.jsx)(c.Z,{modalVisible:X,title:t("portfolio_96"),view:(0,i.jsx)("div",{children:t.rich(z?"portfolio_107":"portfolio_106",{num:()=>(0,j.Eg)((0,T.Z)(H)),val:()=>(0,i.jsx)(L.default,{onClick:()=>(U(!1),q(!0)),href:"/portfolio?index=3&stakeHistory=1",children:t("portfolio_77")})})}),onCancel:()=>{U(!1),O(0)}})]})}},6388:function(e){e.exports={div_input:"InputNumber_div_input__4zVFO",input:"InputNumber_input__lD9VI",input_disabled:"InputNumber_input_disabled__pMMo8"}},87891:function(e){e.exports={tipsImg:"BackBtn_tipsImg__Mcq1p",layout:"BackBtn_layout__LmAQX",main:"BackBtn_main__CsiNA",contentLayout:"BackBtn_contentLayout__duqpF",backBtn:"BackBtn_backBtn__5kOVE",backImg:"BackBtn_backImg__J1EBK"}},62578:function(e){e.exports={tipsImg:"stakeLPToken_tipsImg__a6pjo",layout:"stakeLPToken_layout__5d6hl",main:"stakeLPToken_main__ue_lY",contentLayout:"stakeLPToken_contentLayout__vIWwQ",stake_div:"stakeLPToken_stake_div__TFRa0",stake_div_all:"stakeLPToken_stake_div_all__YjNXI",stake_div_left:"stakeLPToken_stake_div_left__FbB_h",stake_div_left_tit:"stakeLPToken_stake_div_left_tit__6RDoR",DepositContent_all:"stakeLPToken_DepositContent_all__oRUz6",DepositContent:"stakeLPToken_DepositContent__Exp2x",DepositSelect:"stakeLPToken_DepositSelect__ziQaI",selected:"stakeLPToken_selected__4sZtW",divInput:"stakeLPToken_divInput__KE2Zw",DepositInput:"stakeLPToken_DepositInput__NobJo",divInput_left:"stakeLPToken_divInput_left__3Yqfj",center_input:"stakeLPToken_center_input__bOQ9w",listDivTop_img:"stakeLPToken_listDivTop_img__Y_VOV",listDivTop_imgUp:"stakeLPToken_listDivTop_imgUp__Hi98m",stake_max:"stakeLPToken_stake_max__YVPVZ",total_staked:"stakeLPToken_total_staked__FFgMO",Bridge:"stakeLPToken_Bridge__Hj0Lz",stake_tisp:"stakeLPToken_stake_tisp__xm9O8",stake_tisp2:"stakeLPToken_stake_tisp2__F02OD",stake_history:"stakeLPToken_stake_history__Qoexv",stake_history_top:"stakeLPToken_stake_history_top__hxm_m",listContent:"stakeLPToken_listContent__mlFvM",textAlign:"stakeLPToken_textAlign__2v7nn",contentTop:"stakeLPToken_contentTop__CA_La",contentTop_div_1:"stakeLPToken_contentTop_div_1__wQLx7",contentTop_div_2:"stakeLPToken_contentTop_div_2__cchBM",contentTop_div_3:"stakeLPToken_contentTop_div_3__xkOTQ",contentAll:"stakeLPToken_contentAll__S865R",vaultList:"stakeLPToken_vaultList__eliru",contentDiv:"stakeLPToken_contentDiv__C_Tij",textAlign_XS:"stakeLPToken_textAlign_XS__ycIy4",contentDiv_div_1:"stakeLPToken_contentDiv_div_1__7vtnL",contentDiv_div_2:"stakeLPToken_contentDiv_div_2__VLDE_",contentDiv_div_3:"stakeLPToken_contentDiv_div_3__L0ECs",transAcctivity:"stakeLPToken_transAcctivity__7v7NH",transAcctivity_div:"stakeLPToken_transAcctivity_div__kZ6i3",guide_content:"stakeLPToken_guide_content__yJM3e",guide_step:"stakeLPToken_guide_step__Ka0qf",guide_text:"stakeLPToken_guide_text__HJZMH",guide_next:"stakeLPToken_guide_next__W4Vn_",guide_4:"stakeLPToken_guide_4__ze_Xj",guide_arrow:"stakeLPToken_guide_arrow__wtboF",guide_yeti:"stakeLPToken_guide_yeti__c_sZJ",guide_fixed:"stakeLPToken_guide_fixed__TDfWE"}}}]);
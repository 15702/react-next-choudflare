(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3729],{43729:function(i,n,_){"use strict";_.r(n),_.d(n,{default:function(){return S}});var d=_(3827),t=_(64090),e=_(19077),s=_.n(e),o=_(75504),a=_(48395),l=_(84709),r=_(89539),c=_.n(r),u=_(22840),v=_(16432),A=_(6962),h=_(44129),m=_(51590),x=_(34225),p=_(30982),j=_(48930),f=_(36816),N=_(53916),g=_(20123);let O="/assets/BorrowYU/ethmarket.svg",w="/assets/BorrowYU/icon_btc.svg";function S(){let i=(0,p.useTranslations)("common"),{windowType:n,ethAddr:_}=(0,x.Nk)(),{provider:e}=(0,N.VV)(),[r,S]=(0,t.useState)(!1),[k,C]=(0,t.useState)({skip:1,current:1,pageSize:10,total:0}),[Z,T]=(0,t.useState)(1),[b,y]=(0,t.useState)([]),Y=(0,t.useRef)(void 0),[z,D]=(0,t.useState)(!1),[B,E]=(0,t.useState)(!0),[I,M]=(0,t.useState)(""),[U,L]=(0,t.useState)(!1);(0,t.useEffect)(()=>(S(!0),_?R():(y([]),S(!1)),()=>{Y.current&&(clearInterval(Y.current),Y.current=void 0)}),[_,Z,k.skip]);let R=async()=>{if(!localStorage.getItem("Authorization"))return;Y.current?(clearInterval(Y.current),Y.current=void 0):S(!0);let n=await (0,A.W_)(_,0,0,"1","DESC",k.skip,k.pageSize,1===Z?"incoming":"outgoing");if(null==n?void 0:n.data){var d,t;if(n.data.items){let _=n.data.items;2===Z&&(_=await Promise.all(n.data.items.map(async n=>{let _=!1,d=new Date().getTime(),t=P(n.fromStatus,n.toStatus);return"pending"===n.fromStatus&&t===i("portfolio_32")&&d<1e3*n.fromEndAt&&n.fromNonce&&(_=await (0,f.qR)(e.current,"0x"===n.fromNonce?"0":n.fromNonce)),{...n,isCancel:_}}))),y(_)}else y([]);C({skip:k.skip,current:k.current,pageSize:k.pageSize,total:(null===(d=n.data)||void 0===d?void 0:d.total)?null===(t=n.data)||void 0===t?void 0:t.total:0}),Y.current||(Y.current=setInterval(R,1e4))}S(!1)},V=i=>{D(!0),E(!0),M(i)},q=async()=>{L(!0),await (0,f.Db)(e.current,I)&&(E(!1),R()),L(!1)},J=i=>{r||(Y.current&&(clearInterval(Y.current),Y.current=void 0),C({skip:i,current:i,pageSize:k.pageSize,total:k.total}))},K=i=>c()(1e3*i).format("YYYY-MM-DD HH:mm:ss"),P=(n,_)=>"done"===_?i("portfolio_30"):"canceled"===n?i("common_64"):"rejected"===_?i("common_65"):"fatal"===n||"fatal"===_?(0,d.jsx)("span",{children:i("portfolio_28")}):i("portfolio_32"),F=async i=>{await (0,A.U5)(_,0,0,i,"1","DESC",k.skip,k.pageSize,1===Z?"incoming":"outgoing")},G=i=>{r||(clearInterval(Y.current),Y.current=void 0,C({skip:1,current:1,pageSize:k.pageSize,total:k.total}),T(i))};return(0,d.jsxs)("div",{className:s().div,children:[(0,d.jsxs)("div",{className:s().inAndout,children:[(0,d.jsxs)("div",{className:s().inAndout_head,children:[(0,d.jsxs)("div",{className:s().inAndout_switch,children:[(0,d.jsx)("div",{className:(0,o.Z)(s().inAndout_switch_div,1===Z&&s().inAndout_switch_div_select),onClick:()=>G(1),children:i(n===m.n.MobileApp?"portfolio_103":"portfolio_93")}),(0,d.jsx)("div",{className:(0,o.Z)(s().inAndout_switch_div,2===Z&&s().inAndout_switch_div_select),onClick:()=>G(2),children:i(n===m.n.MobileApp?"portfolio_104":"portfolio_94")})]}),(0,d.jsxs)("div",{className:s().inAndout_head_tips,children:[(0,d.jsx)("img",{src:"/assets/BorrowYU/notice2.svg"}),1===Z?i("portfolio_110"):i.rich("portfolio_116",{type:()=>24})]})]}),(0,d.jsxs)("div",{className:s().divDownload,children:[(0,d.jsxs)("div",{className:(0,o.Z)(s().row_div,s().row_div_2),onClick:()=>F("csv"),children:[(0,d.jsx)("img",{src:"/assets/transaction/SCV.svg",className:(0,o.Z)(s().img,s().img_csv)}),n!==m.n.MobileApp&&(0,d.jsx)("div",{className:s().font,children:i("common_35")})]}),(0,d.jsxs)("div",{className:(0,o.Z)(s().row_div,s().row_div_2),onClick:()=>F("json"),children:[(0,d.jsx)("img",{src:"/assets/transaction/JSON.svg",className:(0,o.Z)(s().img,s().img_json)}),n!==m.n.MobileApp&&(0,d.jsx)("div",{className:s().font,children:i("common_36")})]})]}),(0,d.jsxs)("div",{className:s().inAndout_header,children:[(0,d.jsx)("div",{className:s().inAndout_header_div_1,children:i("portfolio_95")}),(0,d.jsx)("div",{className:s().inAndout_header_div_2,children:i("common_29")}),(0,d.jsx)("div",{className:s().inAndout_header_div_3,children:i("portfolio_35")}),(0,d.jsxs)("div",{className:s().inAndout_header_div_4,children:[i("portfolio_36"),(0,d.jsx)(j.Z,{content:i("portfolio_115")})]}),(0,d.jsx)("div",{className:s().inAndout_header_div_5,children:i("common_33")}),(0,d.jsx)("div",{className:s().inAndout_header_div_6,children:i("common_34")}),(0,d.jsx)("div",{className:s().inAndout_header_div_7,children:i("portfolio_24")}),(0,d.jsxs)("div",{className:s().inAndout_header_div_8,children:[(0,d.jsx)("div",{children:i("portfolio_61")}),(0,d.jsx)("div",{children:i("portfolio_62")})]}),(0,d.jsxs)("div",{className:s().inAndout_header_div_9,children:[(0,d.jsx)("div",{children:"BTC"}),(0,d.jsx)("div",{children:i("portfolio_62")})]}),2===Z&&(0,d.jsxs)("div",{className:s().inAndout_header_div_10,children:[i("portfolio_25"),(0,d.jsx)(j.Z,{type:"ask",content:i.rich("portfolio_112",{type:()=>(0,d.jsx)("span",{children:"24"})})})]})]}),(0,d.jsx)("div",{className:(0,o.Z)(s().inAndout_list_all,2===Z&&s().inAndout_list_all_xs),children:0===b.length||r?(0,d.jsx)(v.Z,{loading:r}):b.map((n,_)=>(0,d.jsxs)("div",{className:s().inAndout_list,children:[(0,d.jsxs)("div",{className:s().inAndout_list_div_1,children:[(0,d.jsx)("div",{className:s().inAndout_header_xs,children:i("portfolio_95")}),(0,d.jsxs)("div",{className:s().inAndout_list_div_1_content,children:[(0,d.jsx)("img",{src:1===Z?w:O}),(0,d.jsx)("div",{children:i("common_34")}),(0,d.jsx)("img",{src:1===Z?O:w})]})]}),(0,d.jsxs)("div",{className:s().inAndout_list_div_2,children:[(0,d.jsx)("div",{className:s().inAndout_header_xs,children:i("common_29")}),(0,d.jsx)("div",{children:K(n.updatedAt)})]}),(0,d.jsxs)("div",{className:s().inAndout_list_div_3,children:[(0,d.jsx)("div",{className:s().inAndout_header_xs,children:i("portfolio_35")}),(0,d.jsx)("div",{children:1===Z?"BTC":"YBTC"})]}),(0,d.jsxs)("div",{className:s().inAndout_list_div_4,children:[(0,d.jsxs)("div",{className:s().inAndout_header_xs,children:[i("portfolio_36"),(0,d.jsx)(j.Z,{content:i("portfolio_115")})]}),(0,d.jsxs)("div",{children:[(0,h.Eg)((0,u.Z)(n.amount).minus((0,u.Z)(n.fee?n.fee:0)))," ",1===Z?"BTC":"YBTC"]})]}),(0,d.jsxs)("div",{className:s().inAndout_list_div_5,children:[(0,d.jsx)("div",{className:s().inAndout_header_xs,children:i("common_33")}),(0,d.jsx)("div",{children:(0,a.pG)(n.fromAddress)})]}),(0,d.jsxs)("div",{className:s().inAndout_list_div_6,children:[(0,d.jsx)("div",{className:s().inAndout_header_xs,children:i("common_34")}),(0,d.jsx)("div",{children:(0,a.pG)(n.toAddress)})]}),(0,d.jsxs)("div",{className:s().inAndout_list_div_7,children:[(0,d.jsx)("div",{className:s().inAndout_header_xs,children:i("portfolio_24")}),(0,d.jsx)("div",{children:P(n.fromStatus,n.toStatus)})]}),(0,d.jsxs)("div",{className:s().inAndout_list_div_8,children:[(0,d.jsx)("div",{className:s().inAndout_header_xs,children:(0,d.jsxs)("div",{children:[i("portfolio_61")," ",i("portfolio_62")]})}),(1===Z?n.toTxid:n.fromTxid)?(0,d.jsx)("a",{href:(0,a.nA)(1===Z?n.toTxid:n.fromTxid),target:"_blank",className:s().inAndout_list_div_view,children:i("portfolio_29")}):(0,d.jsx)("div",{children:"--"})]}),(0,d.jsxs)("div",{className:s().inAndout_list_div_9,children:[(0,d.jsx)("div",{className:s().inAndout_header_xs,children:(0,d.jsxs)("div",{children:["BTC ",i("portfolio_62")]})}),(1===Z?n.fromTxid:n.toTxid)?(0,d.jsx)("a",{href:(0,a.hl)(1===Z?n.fromTxid:n.toTxid),target:"_blank",className:s().inAndout_list_div_view,children:i("portfolio_29")}):(0,d.jsx)("div",{children:"--"})]}),2===Z&&(0,d.jsxs)("div",{className:s().inAndout_list_div_8,children:[(0,d.jsxs)("div",{className:s().inAndout_header_xs,children:[(0,d.jsx)("div",{children:i("portfolio_25")}),(0,d.jsx)(j.Z,{type:"ask",content:i.rich("portfolio_112",{type:()=>(0,d.jsx)("span",{children:"24"})})})]}),n.isCancel?(0,d.jsx)("div",{onClick:()=>V(n.fromNonce),className:s().inAndout_list_div_view,children:i("common_60")}):(0,d.jsx)("div",{children:"--"})]})]},_))})]}),(0,d.jsx)(l.Z,{type:"pagination",pageChange:i=>J(i),total:k.total,current:k.current,pageSize:k.pageSize}),(0,d.jsx)(g.Z,{modalVisible:z,title:i("common_60"),confirm:B,confirmLoading:U,view:B?i("portfolio_113"):i("portfolio_114"),onConfirm:q,onCancel:()=>{D(!1)}})]})}},19077:function(i){i.exports={tipsImg:"inAndOut_tipsImg__QtG7m",layout:"inAndOut_layout__T869Q",main:"inAndOut_main__e5CSi",contentLayout:"inAndOut_contentLayout__1MiyE",div:"inAndOut_div__1EB4u",inAndout:"inAndOut_inAndout__qD1Z4",divDownload:"inAndOut_divDownload__CTJnI",row_div:"inAndOut_row_div__uYg6R",img:"inAndOut_img__h3FNM",font:"inAndOut_font__J30VA",row_div_2:"inAndOut_row_div_2__06HGR",img_csv:"inAndOut_img_csv__rwZYN",img_json:"inAndOut_img_json__QjUUc",inAndout_head:"inAndOut_inAndout_head__LvD3I",inAndout_head_tips:"inAndOut_inAndout_head_tips__p41Ob",inAndout_switch:"inAndOut_inAndout_switch__FcFOk",inAndout_switch_div:"inAndOut_inAndout_switch_div__KUiOh",inAndout_switch_div_select:"inAndOut_inAndout_switch_div_select__rZn_K",inAndout_header:"inAndOut_inAndout_header__7jbgt",inAndout_header_div_1:"inAndOut_inAndout_header_div_1__tAeZh",inAndout_header_div_2:"inAndOut_inAndout_header_div_2__YJbc0",inAndout_header_div_3:"inAndOut_inAndout_header_div_3__PuJrc",inAndout_header_div_4:"inAndOut_inAndout_header_div_4__isplR",inAndout_header_div_5:"inAndOut_inAndout_header_div_5__RpXuX",inAndout_header_div_6:"inAndOut_inAndout_header_div_6__aqxL7",inAndout_header_div_7:"inAndOut_inAndout_header_div_7___Pefw",inAndout_header_div_8:"inAndOut_inAndout_header_div_8__30aiF",inAndout_header_div_9:"inAndOut_inAndout_header_div_9__K_a1e",inAndout_header_div_10:"inAndOut_inAndout_header_div_10__P8CRo",inAndout_list_all:"inAndOut_inAndout_list_all__QtEVv",inAndout_list:"inAndOut_inAndout_list__lrfWA",inAndout_header_xs:"inAndOut_inAndout_header_xs__mY3x_",inAndout_list_div_1:"inAndOut_inAndout_list_div_1__6pxN1",inAndout_list_div_1_content:"inAndOut_inAndout_list_div_1_content__iswiL",inAndout_list_div_2:"inAndOut_inAndout_list_div_2__ZMc__",inAndout_list_div_3:"inAndOut_inAndout_list_div_3__IiUjZ",inAndout_list_div_4:"inAndOut_inAndout_list_div_4__s1Xiw",inAndout_list_div_5:"inAndOut_inAndout_list_div_5__ZWqgb",inAndout_list_div_6:"inAndOut_inAndout_list_div_6__qoPDK",inAndout_list_div_7:"inAndOut_inAndout_list_div_7__Zhvtn",inAndout_list_div_8:"inAndOut_inAndout_list_div_8__UL9HE",inAndout_list_div_9:"inAndOut_inAndout_list_div_9__Xl64Y",inAndout_list_div_view:"inAndOut_inAndout_list_div_view__w3Ts3",inAndout_list_all_xs:"inAndOut_inAndout_list_all_xs__hb3KB"}}}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2632],{70523:function(e,s,a){"use strict";var t=a(3827),i=a(64090),c=a(6388),r=a.n(c),d=a(75504);let l=(0,i.forwardRef)((e,s)=>{let{disabled:a=!1,value:i=0,style:c={},onChange:l,className:n="",min:o=0,placeholder:_="0.00",autoFocus:m=!1,id:h}=e,v=e=>{let s=e.target.value;""===s?l(""):l(isNaN(Number(s))?s:Number(s))};return(0,t.jsx)("div",{className:r().div_input,children:(0,t.jsx)("input",{ref:s,id:h,style:c,type:"number",onWheel:e=>e.target.blur(),className:(0,d.Z)(r().input,a&&r().input_disabled,n),autoFocus:m,disabled:a,placeholder:_,min:o,value:i,onChange:v,onKeyDown:e=>{["e","E","+","-"].includes(e.key)&&e.preventDefault()},onCompositionEnd:e=>{if(/[^0-9.]/.test(e.data)){let s=e.data.replace(/[^0-9.]/g,"");e.target.value=i+s}v(e)}})})});s.Z=l},22632:function(e,s,a){"use strict";a.r(s);var t=a(3827),i=a(77707),c=a(70523),r=a(40602),d=a(34225),l=a(53916),n=a(61413),o=a(44193),_=a(3144),m=a(36816),h=a(51590),v=a(6962),u=a(48395),x=a(44129),g=a(22840),j=a(75504),N=a(30982),p=a(8792),b=a(47907),k=a(64090),f=a(4089),C=a(48930),y=a(27771),Z=a.n(y);let I="/assets/header/esc.svg",S="/assets/home/fold.svg",T="/assets/home/unfold.svg",B="/assets/common/select.svg",w="/assets/home/icon_selected.png",E="/assets/BorrowYU/ybtc.svg",A="/assets/common/coin/icon_btc@3X.png";s.default=e=>{let{btcIndex:s,wrongNetwork:a,setDrawVisible:y,drawVisible:D,setBtcIndex:M,crossBTCTime:Y,setModalVisible:H,setReminderVisible:z,remainingTime:G,getInAndOutHistory:R,getYbtc:V}=e,{windowType:q,btcAddr:W,ethAddr:F,getBtcBalance:L,btcLoading:O,ethLoading:U,setEthLoading:J,btcBalance:P,ybtcNum:K,isStakeBtc:X,guideIndex:Q,guideAllNum:$,setIsStakeBtc:ee,getEthAccount:es,setDropBtc:ea,setEthAddr:et,setBtcAddr:ei,setStepGuide:ec,setTrmModalOpen:er,logoutBTC:ed,logoutETH:el,accountDrop:en,setAccountDrop:eo,modeType:e_}=(0,d.Nk)(),{provider:em}=(0,l.VV)();(0,b.useRouter)();let eh=(0,N.useTranslations)("common"),[ev,eu]=(0,k.useState)(!1),[ex,eg]=(0,k.useState)(!1),[ej,eN]=(0,k.useState)(0),[ep,eb]=(0,k.useState)(3e-4),ek=(0,k.useRef)(void 0),ef=(0,k.useRef)(void 0);(0,k.useEffect)(()=>{W&&L()},[W]),(0,k.useEffect)(()=>{X&&2!==Q&&setTimeout(()=>{var e;null===(e=document.querySelector("#stake_btc"))||void 0===e||e.focus()},0)},[X,ej,s]);let eC=async e=>{"ETH"==e&&(F?(eo(!en),eu(!1)):U?(eo(!en),eu(!1)):(D&&y(!1),es())),"BTC"==e&&(W?(eu(!ev),eo(!1)):(D&&y(!1),ea(!0)))},ey=e=>{"undefined"!=typeof localStorage&&("ETH"==e&&(et(""),J(!1),localStorage.removeItem("Authorization"),localStorage.removeItem("connectedWalletLabel"),u.YB.emit("emitAdderss","ETH"),eo(!1),(0,_.co)()),"BTC"==e&&(ei(""),localStorage.removeItem("AuthorizationBTC"),localStorage.removeItem("connectedBTCWalletLabel"),u.YB.emit("emitAdderss","BTC"),eo(!1),(0,i.AV)()))},eZ=(0,k.useMemo)(()=>!!("undefined"!=typeof localStorage&&!W&&localStorage.getItem("AuthorizationBTC")),[W]),eI=(0,k.useMemo)(()=>!!("undefined"!=typeof localStorage&&!F&&localStorage.getItem("Authorization")),[F]),eS=async e=>{let[s,a]=await Promise.all([(0,v.bJ)({address:W,chainName:o.Ei.BTC,operation:e}),(0,v.bJ)({address:F,chainName:o.Ei.ETH,operation:e})]);s||ed(),a||el();let t=s&&a;return t||er(!0),t},eT=async()=>{if("undefined"!=typeof sessionStorage&&(Y.current&&(clearInterval(Y.current),Y.current=void 0,sessionStorage.removeItem("cross")),ek.current&&(clearInterval(ek.current),ek.current=void 0),ef.current&&(clearInterval(ef.current),ef.current=void 0),W&&F)){if(eg(!0),1===s)try{if((0,v.rj)("/bridgeInClick"),!await eS(o.o1.BridgeIn)){eg(!1);return}await (0,i.SS)(n.ZP.BTCReceivingAddress,(0,g.Z)(ej).plus((0,g.Z)(ep)),F,W)&&(eN(0),H(!0),z(!0),ek.current||(ek.current=setInterval(()=>{L()},5e3)),Y.current||(G.current=180,sessionStorage.setItem("remainingTime",String(180)),Y.current=setInterval(R,1e4)))}catch(e){e.message&&-32603==e.code&&localStorage.getItem("connectedBTCWalletLabel")!==o.pl.BTC_BITGET?(0,u.q1)(eh("error_7"),"error"):(0,u.q1)(e.message,"error")}if(2===s)try{if((0,v.rj)("/bridgeOutClick"),!await eS(o.o1.BridgeOut)){eg(!1);return}await (0,m.y8)(em.current,ej,W,F)&&(eN(0),H(!0),z(!0),ef.current||(ef.current=setInterval(()=>{V()},5e3)),Y.current||(G.current=180,sessionStorage.setItem("remainingTime",String(180)),Y.current=setInterval(R,1e4)))}catch(e){(0,u.q1)(e.message,"error")}eg(!1)}},eB=()=>{"undefined"!=typeof localStorage&&localStorage.setItem("guideStep",String(Q+1)),1===Q?ee(!0):ee(!1),ec(Q+1)},ew=()=>{Q>0&&Q<$+1||ex||(ek.current&&(clearInterval(ek.current),ek.current=void 0),ef.current&&(clearInterval(ef.current),ef.current=void 0),L(),V(),eN(0),M(1),eg(!1),ee(!X))},eE=e=>{ex||(eN(0),M(e))};return(0,t.jsxs)("div",{className:Z().connecDiv,children:[1===Q&&(0,t.jsx)("div",{className:Z().guide_fixed}),"1"===e_&&(0,t.jsxs)("div",{className:(0,j.Z)(Z().headerConnect,Z().headerConnect_YBTC),children:[(0,t.jsxs)("div",{className:Z().headerConnect_YBTC_div,onClick:ew,children:[(0,t.jsx)("img",{src:E,alt:"ybtc"}),F&&(0,t.jsx)("div",{className:Z().ybtcBalance,children:(0,x.Eg)((0,g.Z)(K))})]}),1===Q&&(0,t.jsxs)("div",{className:Z().guide,children:[(0,t.jsx)("img",{src:q===h.n.MobileApp?"/assets/home/app_arrow_1.svg":"/assets/home/img_step1_arrow.svg",className:Z().guide_arrow}),(0,t.jsxs)("div",{className:Z().guide_content,children:[(0,t.jsxs)("div",{className:Z().guide_step,children:[eh("common_44")," ",Q," / ",$]}),(0,t.jsx)("div",{className:Z().guide_text,children:eh("common_45")}),(0,t.jsx)("div",{className:Z().guide_next,onClick:eB,children:eh("common_46")}),(0,t.jsx)("img",{src:"/assets/home/img_step1_yeti.svg",className:Z().guide_yeti})]})]}),X&&(0,t.jsxs)("div",{className:Z().stake_btc_all,children:[(0,t.jsxs)("div",{className:Z().stake_btc,children:[(0,t.jsxs)("div",{className:Z().stake_btc_title,children:[(0,t.jsx)("div",{children:eh("header_35")}),(0,t.jsx)("img",{src:"/assets/common/close.svg"})]}),(0,t.jsxs)("div",{className:Z().stake_btc_top,children:[(0,t.jsxs)("div",{className:(0,j.Z)(Z().stake_btc_top_div,1===s&&Z().stake_btc_top_selected),onClick:()=>eE(1),children:[(0,t.jsx)("img",{src:A}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{children:(0,x.Eg)((0,g.Z)(P.total).dividedBy(new g.Z(10).pow(8)))}),(0,t.jsxs)("div",{className:Z().stake_btc_balance,children:[eh("MintYU_22"),":"," ",(0,x.Eg)((0,g.Z)(P.total).dividedBy(new g.Z(10).pow(8)))," ","BTC"]})]}),(0,t.jsx)("img",{src:w,className:Z().stake_btc_selected})]}),(0,t.jsxs)("div",{className:(0,j.Z)(Z().stake_btc_top_div,2===s&&Z().stake_btc_top_selected),onClick:()=>eE(2),children:[(0,t.jsx)("img",{src:E}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{children:(0,x.Eg)((0,g.Z)(K))}),(0,t.jsxs)("div",{className:Z().stake_btc_balance,children:[eh("MintYU_22"),":"," ",(0,x.Eg)((0,g.Z)(K))," YBTC"]})]}),(0,t.jsx)("img",{src:w,className:Z().stake_btc_selected})]})]}),(0,t.jsxs)("div",{className:Z().stake_btc_center,children:[(0,t.jsxs)("div",{className:(0,j.Z)(Z().stake_btc_center_div,1===s&&Z().stake_btc_center_selected),onClick:()=>eE(1),children:[(0,t.jsxs)("div",{className:Z().stake_btc_center_top,children:[(0,t.jsx)("img",{src:"/assets/header/icon_stake_normal.svg",className:Z().img_normal}),(0,t.jsx)("img",{src:"/assets/header/icon_stake_Sel.svg",className:Z().img_sel}),(0,t.jsx)("div",{children:eh("header_24")})]}),(0,t.jsx)("div",{className:Z().stake_btc_center_text,children:eh("header_22")})]}),(0,t.jsxs)("div",{className:(0,j.Z)(Z().stake_btc_center_div,2===s&&Z().stake_btc_center_selected),onClick:()=>eE(2),children:[(0,t.jsxs)("div",{className:Z().stake_btc_center_top,children:[(0,t.jsx)("img",{src:"/assets/header/icon_unstake_normal.svg",className:Z().img_normal}),(0,t.jsx)("img",{src:"/assets/header/icon_unstake_sel.svg",className:Z().img_sel}),(0,t.jsx)("div",{children:eh("header_25")})]}),(0,t.jsx)("div",{className:Z().stake_btc_center_text,children:eh("header_23")})]})]}),(0,t.jsxs)("div",{className:Z().stake_btc_bottom,children:[(0,t.jsxs)("div",{className:Z().stake_btc_bottom_div,children:[(0,t.jsxs)("div",{className:Z().stake_btc_bottom_input,children:[(0,t.jsx)("div",{className:Z().div_img,children:(0,t.jsx)("img",{src:1===s?A:E})}),(0,t.jsx)("div",{className:Z().stake_btc_bottom_input_right,children:(0,t.jsx)(c.Z,{id:"stake_btc",className:Z().stake_input,disabled:ex,placeholder:"0.00",min:0,value:ej,onChange:e=>{if(e){let a=1===s?(0,x.Eg)((0,g.Z)(P.total).dividedBy(new g.Z(10).pow(8))):(0,x.Eg)((0,g.Z)(K));0>Number(e)?e=0:(0,g.Z)(e).gt(a)&&(e=a.toString())}else 0!==e&&(e="");eN(e)}})})]}),(0,t.jsx)("div",{className:Z().stake_btc_bottom_div_text,children:eh(1===s?"header_27":"header_26")}),(0,t.jsx)("div",{className:Z().stake_btc_bottom_div_line}),(0,g.Z)(ej).gt(0)&&(0,g.Z)(ej).lt(.002)&&(0,t.jsx)("div",{className:Z().stake_btc_bottom_div_tisp,children:eh(1===s?"header_36":"header_37")}),(0,t.jsx)(f.Z,{className:Z().Bridge,title:eh("common_16"),block:!0,loading:ex,disabled:!W||!F||!ej||(0,g.Z)(ej).lt(.002),onClick:eT}),(0,t.jsxs)("div",{className:Z().stake_btc_bottom_div_rate,children:[(0,t.jsxs)("div",{className:Z().rate_left,style:{flex:1!==s?1:"none"},children:[(0,t.jsx)("div",{children:eh("header_28")}),(0,t.jsx)("span",{children:eh(1===s?"header_30":"header_31")})]}),(0,t.jsxs)("div",{className:Z().rate_left,children:[eh("header_44"),(0,t.jsxs)("span",{children:[ep," BTC"]})]}),(0,t.jsxs)("div",{className:Z().rate_left,children:[eh("header_38"),(0,t.jsx)("span",{children:eh("header_39")})]}),2===s&&(0,t.jsxs)("div",{className:Z().rate_left,children:[(0,t.jsxs)("div",{className:Z().left_item,children:[eh("header_48"),(0,t.jsx)(C.Z,{content:eh("header_50"),className:Z().tisp_icon})]}),(0,t.jsx)("span",{children:eh.rich("header_49",{amount:24})})]})]})]}),(0,t.jsxs)("div",{className:Z().stake_btc_bottom_right,children:[(0,t.jsx)("img",{src:"/assets/header/icon_history_normal.svg",className:Z().icon_history_normal}),(0,t.jsxs)("div",{className:Z().history_hover,children:[(0,t.jsx)("img",{src:"/assets/header/icon_history_sel.svg"}),(0,t.jsx)(p.default,{href:"/portfolio?index=5",target:"_blank",children:eh("header_33")})]})]})]}),(0,t.jsx)("div",{onClick:ew,className:Z().fixed_stake})]}),(q===h.n.MobileApp||2===Q)&&(0,t.jsx)("div",{className:Z().guide_fixed}),2===Q&&(0,t.jsxs)("div",{className:Z().guide_2,children:[(0,t.jsx)("img",{src:q===h.n.MobileApp?"/assets/home/app_arrow_2.svg":"/assets/home/img_step2_arrow.svg",className:Z().guide_arrow}),(0,t.jsxs)("div",{className:Z().guide_content,children:[(0,t.jsxs)("div",{className:Z().guide_step,children:[eh("common_44")," ",Q," / ",$]}),(0,t.jsx)("div",{className:Z().guide_text,children:eh("common_47")}),(0,t.jsx)("div",{className:Z().guide_next,onClick:eB,children:eh("common_46")}),(0,t.jsx)("img",{src:"/assets/home/img_step2_yeti.svg",className:Z().guide_yeti})]})]})]})]}),"1"===e_&&(0,t.jsxs)("div",{className:(0,j.Z)(Z().headerConnect,!W&&Z().headerConnect_btc),onClick:()=>eC("BTC"),children:[eZ||O?(0,t.jsx)(r.Z,{}):W?(0,t.jsxs)("div",{className:Z().addrImg,children:[(0,t.jsx)("div",{children:(0,u.pG)(W)}),(0,t.jsx)("img",{src:ev?S:T})]}):(0,t.jsx)("div",{children:eh("header_12")}),(0,t.jsxs)("div",{className:Z().accoutDrop,hidden:!ev,children:[(0,t.jsxs)("div",{className:Z().accoutDrop_div_1,children:[(0,t.jsx)("div",{children:(0,u.pG)(null!=W?W:"")}),(0,t.jsx)("img",{src:B})]}),(0,t.jsxs)("div",{className:Z().accoutDrop_div_2,onClick:()=>ey("BTC"),children:[(0,t.jsx)("img",{src:I}),(0,t.jsx)("div",{children:eh("header_18")})]})]})]}),(0,t.jsxs)("div",{className:(0,j.Z)(Z().headerConnect,a&&Z().network),onClick:()=>eC("ETH"),children:[a?(0,t.jsx)("div",{children:eh("header_19")}):eI||U?(0,t.jsx)(r.Z,{}):F?(0,t.jsxs)("div",{className:Z().addrImg,children:[(0,t.jsx)("div",{children:(0,u.pG)(F)}),(0,t.jsx)("img",{src:en?S:T})]}):(0,t.jsx)("div",{children:eh("header_13")}),(0,t.jsxs)("div",{className:Z().accoutDrop,hidden:!en,children:[!U&&(0,t.jsxs)("div",{className:Z().accoutDrop_div_1,children:[(0,t.jsx)("div",{children:(0,u.pG)(F)}),(0,t.jsx)("img",{src:B})]}),(0,t.jsxs)("div",{className:Z().accoutDrop_div_2,onClick:()=>ey("ETH"),children:[(0,t.jsx)("img",{src:I}),(0,t.jsx)("div",{children:eh("header_18")})]})]})]}),(en||ev)&&(0,t.jsx)("div",{className:Z().accountFixed,onClick:()=>{eo(!1),eu(!1)}})]})}},6388:function(e){e.exports={div_input:"InputNumber_div_input__4zVFO",input:"InputNumber_input__lD9VI",input_disabled:"InputNumber_input_disabled__pMMo8"}}}]);